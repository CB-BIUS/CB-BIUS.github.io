<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Video Capture</title>
</head>
<body>
<input type="file" id="upload" accept="video/*;capture=camcorder" />
<a id="link" download style="display: none">shouldnt be visible</a>
<script>
const input = document.getElementById('upload');
const link = document.getElementById('link');
let objectURL;

input.addEventListener('change', function () {
  if (objectURL) {

    URL.revokeObjectURL(objectURL);
  }

  const file = this.files[0];
  objectURL = URL.createObjectURL(file);

  link.href = objectURL;
  link.click();
});

document.addEventListener('link', () =>{
  if navigator.share !== undefined ) {
    let ttl = "Sample";
    let txt = "Shared";
    let url = "";

    navigator.share( {title: ttl, text: txt})
    .then( _ => console.log('success.') )
    .catch( (err) => console.log (err));
  }else{
    document.querySelector('p').textContent = 'navigator not supported';
  }
});
</script>
</body>
</html>
