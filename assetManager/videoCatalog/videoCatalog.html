<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Cameron Baffuto">

    <link rel="apple-touch-icon" sizes="76x76" href="../images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../images/favicon-16x16.png">
    <link rel="manifest" href="../images/site.webmanifest">
    <link rel="mask-icon" href="../images/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#2b5797">
    <meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
    <link rel="stylesheet" href="../main.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Nunito&display=swap" rel="stylesheet">

    <title>Bionical Asset Manager</title>

</head>
<body>
<div class="d-flex" id="wrapper">

    <!-- Sidebar -->
    <div class="filters bg-light border-right pb-5" id="sidebar-wrapper">
        <div class="sidebar-heading">Filter Options</div>
        <hr>
        <div class="ui-group">
            <div class="button-group btn-group m-1 ml-4">
                <button class="button btn btn-danger" onClick="window.location.reload();">Reset Filters</button>
            </div>
        </div>
        <hr>
        <div class="ui-group">
            <p class="ml-3 label text-wrap sidebar-title">Name</p>
            <div class="button-group btn-group-vertical ml-4" data-filter-group="resource">
                <button class="button btn btn-outline-secondary is-checked" data-filter="">All</button>
                <button class="button btn btn-outline-secondary" data-filter=".seal">Seal <span class="filter-count"></span></button>
                <button class="button btn btn-outline-secondary" data-filter=".turtle">Turtle <span class="filter-count"></span></button>
                <button class="button btn btn-outline-secondary" data-filter=".penguin">Penguin <span class="filter-count"></span></button>
                <button class="button btn btn-outline-secondary" data-filter=".alpaca">Alpaca <span class="filter-count"></span></button>
                <button class="button btn btn-outline-secondary" data-filter=".monkey">Monkey <span class="filter-count"></span></button>
                <button class="button btn btn-outline-secondary" data-filter=".dog">Dog <span class="filter-count"></span></button>
            </div>
        </div>
        <hr>
        <div class="ui-group">
            <p class="ml-3 label text-wrap sidebar-title">Location</p>
            <div class="button-group btn-group-vertical ml-4" data-filter-group="brand">
                <button class="button btn btn-outline-secondary is-checked" data-filter="">All</button>
                <button class="button btn btn-outline-secondary" data-filter=".land">Land <span class="filter-count"></span></button>
                <button class="button btn btn-outline-secondary" data-filter=".sea">Sea <span class="filter-count"></span></button>
            </div>
        </div>
        <hr>
        <div class="ui-group">
            <p class="ml-3 label text-wrap sidebar-title">Type</p>
            <div class="button-group btn-group-vertical ml-4" data-filter-group="type">
                <button class="button btn btn-outline-secondary is-checked" data-filter="">All</button>
                <button class="button btn btn-outline-secondary" data-filter=".mammal">Mammal <span class="filter-count"></span></button>
                <button class="button btn btn-outline-secondary" data-filter=".reptile">Reptiles <span class="filter-count"></span></button>
                <button class="button btn btn-outline-secondary" data-filter=".bird">Bird <span class="filter-count"></span></button>
            </div>
        </div>
    
    </div>
    <!-- /#sidebar-wrapper -->

    <!-- Page Content -->
    <div id="page-content-wrapper">

        <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom" id="top">
            <button class="btn btn-secondary" id="menu-toggle">Filter <i class="fas fa-filter"></i></button>
    
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
    
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
                <li class="nav-item">
                  <a class="nav-link" href="../index.html">Home <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="../catalog/projectCatalog.html">Project Catalog</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="../salesMaterial/salesMaterials.html">Sales Materials</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="videoCatalog.html">Video Catalog</a>
                </li>
              </ul>
            </div>
          </nav>
        <div class="filters" id="search">
            <input class="form-control m-2 w-50" type="search" placeholder="Search by Name" onfocus="this.value=''" aria-label="Search">
        </div>

        <div class="container-fluid">

            <div class="row grid" id="videos">

            </div>
            <div class="no-results alert alert-danger text-center" role="alert">
                <h4 class="alert-heading">No Results...</h4>
                <p>Please edit filter selections or</p>
                <button class="button btn btn-danger btn-lg" onClick="window.location.reload();">Reset Filters</button>
            </div>
        </div>

        <br>
        <br>
        <div class="m-5">
            <a href="#top" class="btn blueButton btn-lg m-5 float-right"> <i class="fas fa-angle-double-up fa-lg"></i></a>
        </div>
        <br>
        <br>
    </div>

</div>


<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<script src="videoData.js"></script>
<script src="videoTemplate.js"></script>
<script src="https://unpkg.com/isotope-layout@3/dist/isotope.pkgd.min.js"></script>
<script src='http://imagesloaded.desandro.com/imagesloaded.pkgd.js'></script>

<script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });

    $(document).ready(function () {
  var alterClass = function() {
    var ww = document.body.clientWidth;
    if (ww < 600) {
      $('#wrapper').addClass('toggled');
    } else if (ww >= 601) {
      $('#wrapper').removeClass('toggled');
    };
  };
  $(window).resize(function(){
    alterClass();
  });
  
  alterClass();
});

function removeAttributes(){
 $("a").each(function(){
  if($(this).attr("href") == "n/a") {
    $(this).remove();
  }
  if($(this).attr("id") == "n/a") {
    $(this).remove();
  }
 })
}
removeAttributes();

</script>

<script type="text/javascript">
    $(document).ready(function(){
    
        var $grid = $('.grid').isotope({
            itemSelector: '.grid-item',
            percentPosition: true,
            filter: function() {
            return qsRegex ? $(this).text().match( qsRegex ) : true;
            },
            masonry: {
            columnWidth: '.grid-item',
            },
            sortBy : 'random'
        });
    
        $(window).on('load', function(){ $grid.isotope('layout') });
        
        var $filterUI = $('.filters .button');
    
        updateFilterCounts();
        checkResults();
        
        function checkResults(){
            var visibleItemsCount = $grid.data('isotope').filteredItems.length;
            console.log(filters);
            if( visibleItemsCount > 0 ){
                $('.no-results').hide();
            }
            else{
                $('.no-results').show();
            }
        }
    
        // store filter for each group
        var filters = {};
    
        $('.filters').on( 'click', '.button', function() {
            var $this = $(this);
            // get group key
            var $buttonGroup = $this.parents('.button-group');
            var filterGroup = $buttonGroup.attr('data-filter-group');
            // set filter for group
            filters[ filterGroup ] = $this.attr('data-filter');
            // combine filters
            var filterValue = concatValues( filters );
            // set filter for Isotope
            $grid.isotope({ filter: filterValue });
            updateFilterCounts();
            checkResults();
        });

        var qsRegex;
    
        var $quicksearch = $('.form-control').keyup( debounce( function() {
        qsRegex = new RegExp( $quicksearch.val(), 'gi' );
        $grid.isotope();
        updateFilterCounts();
        checkResults();
        }, 200 ) );

        function debounce( fn, threshold ) {
        var timeout;
        threshold = threshold || 100;
        return function debounced() {
        clearTimeout( timeout );
        var args = arguments;
        var _this = this;
        function delayed() {
        fn.apply( _this, args );
    }
    timeout = setTimeout( delayed, threshold );
    };
    } 
    
        // change is-checked class on buttons
        $('.button-group').each( function( i, buttonGroup ) {
            var $buttonGroup = $( buttonGroup );
            $buttonGroup.on( 'click', 'button', function() {
                $buttonGroup.find('.is-checked').removeClass('is-checked');
                $( this ).addClass('is-checked');
            });
        });
    
        // flatten object by concatting values
        function concatValues( obj ) {
            var value = '';
            for ( var prop in obj ) {
                value += obj[ prop ];
            }
            return value;
        }
    
        function updateFilterCounts()  {
            // get filtered item elements
            var itemElems = $grid.isotope('getFilteredItemElements');
            var $itemElems = $( itemElems );
            $filterUI.each( function( i, elem ) {
    
                var $elem = $( elem );
                var filterValue = $elem.attr('data-filter');
                if ( !filterValue ) {
                    // do not update 'any' buttons
                    return;
                }
    
                var count = $itemElems.filter( filterValue ).length;
                var countText = '(' + count +')';
                if ( $elem.is('option') ) {
                    countText = $elem.attr('data-name') + ' ' + countText;
                    $elem.text( countText );
                } else {
                    $elem.find('.filter-count').text( countText );
                }
            });
        }
    });

    $('.sort_new').on('click', function () {
    $('.grid').isotope({
        sortBy: '.timestamp',
        sortAscending: true,
    });
});

$('.sort_old').on('click', function () {
    $('.grid').isotope({
        sortBy: '.timestamp',
        sortAscending: false,
    });
});

</script>

</body>
</html>
